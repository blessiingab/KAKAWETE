<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KAKAWETE â€¢ Secret Santa 2026</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<!-- Background -->
<div class="bg-layer">
  <div class="glow glow-red"></div>
  <div class="glow glow-green"></div>
  <div class="snowflakes" id="snowflakes"></div>
</div>

<main class="app">

  <!-- HERO -->
  <header class="hero">

    <!-- Brand identity bar -->
    <div class="brand-bar">
      <img src="sonarwa-logo.jpg" alt="SONARWA General" class="brand-logo">
      <div class="brand-text">
        <div class="brand-name">SONARWA General</div>
        <div class="brand-sub">Insurance Â· Rwanda</div>
      </div>
      <div class="brand-divider"></div>
      <div class="brand-event">
        <div class="brand-event-label">Annual Event</div>
        <div class="brand-event-name">Secret Santa 2026</div>
      </div>
    </div>

    <div class="hero-badge">âœ¦ SECRET SANTA 2026 âœ¦</div>
    <h1 class="logo"><span class="k1">KAKAWETE</span></h1>
    <p class="hero-tagline">Gift Exchange Â· SONARWA Family</p>
    <button class="btn-admin-access" onclick="showScreen('screen-admin-login')">ğŸ›¡ Admin</button>
  </header>

  <!-- FLOATING REVEAL BUTTON (visible only on screen-vote) -->
  <button class="btn-reveal-float" id="revealFloatBtn" onclick="confirmVote()" title="Reveal My Gift" style="display:none">
    ğŸ <span class="float-label">Reveal Gift</span>
  </button>

  <!-- SCREEN 1 -->
  <section id="screen-name" class="screen active">
    <div class="card">
      <h2>WELCOME</h2>
      <p class="muted">Enter your full name to begin</p>

      <input
        type="text"
        id="nameInput"
        placeholder="Your full name..."
        autocomplete="off"
        onkeydown="if(event.key==='Enter') proceedToVote()"
      >

      <div class="name-error" id="nameError"></div>

      <button class="btn primary full" onclick="proceedToVote()">
        Continue
      </button>
    </div>
  </section>

  <!-- SCREEN 2 -->
  <section id="screen-vote" class="screen">
    <div class="card wide">

      <div id="voteHeader" class="vote-header"></div>

      <h3 class="grid-title">ğŸ Select Your Gift Number</h3>

      <div id="numberGrid" class="number-grid"></div>

      <div class="btn-row">
        <button class="btn primary" id="confirmBtn" onclick="confirmVote()" disabled>
          Reveal ğŸ
        </button>
        <button class="btn ghost" onclick="goBack()">Back</button>
      </div>

    </div>
  </section>

  <!-- SCREEN 3 -->
  <section id="screen-result" class="screen">
    <div class="card result" id="resultCard"></div>
  </section>

  <!-- SCREEN 4 -->
  <section id="screen-summary" class="screen">
    <div class="card wide">

      <div class="summary-header">
        <h2> Secret Santa Summary</h2>
        <button class="btn ghost small" onclick="showScreen('screen-name')">Back</button>
      </div>

      <div id="statsBar" class="stats-bar"></div>

      <div class="table-wrap">
        <table class="summary-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Santa</th>
              <th>Number</th>
              <th>Recipient</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="summaryBody"></tbody>
        </table>
      </div>

    </div>
  </section>

  <!-- ADMIN LOGIN SCREEN -->
  <section id="screen-admin-login" class="screen">
    <div class="card card-admin-login">
      <div class="admin-lock-icon">ğŸ”</div>
      <h2>ADMIN ACCESS</h2>
      <p class="muted admin-login-subtitle">Enter the admin password to view the full summary</p>
      <input
        type="password"
        id="adminPasswordInput"
        placeholder="Password..."
        autocomplete="off"
        onkeydown="if(event.key==='Enter') adminLogin()"
      >
      <div class="name-error" id="adminError"></div>
      <button class="btn primary full" onclick="adminLogin()">Unlock Panel ğŸ”“</button>
      <button class="btn ghost full btn-back-admin" onclick="showScreen('screen-name')">â† Back</button>
    </div>
  </section>

  <!-- ADMIN PANEL SCREEN -->
  <section id="screen-admin" class="screen">
    <div class="card wide">
      <div class="summary-header">
        <div class="admin-header-left">
          <div class="admin-badge">ğŸ›¡ ADMIN</div>
          <h2>Secret Santa Summary</h2>
        </div>
        <div class="admin-header-actions">
          <button class="btn ghost small" onclick="exportCSV()">â¬‡ Export CSV</button>
          <button class="btn-danger small" onclick="confirmReset()">ğŸ—‘ Reset All</button>
          <button class="btn ghost small" onclick="showScreen('screen-name')">â† Back</button>
        </div>
      </div>

      <div id="adminStatsBar" class="stats-bar"></div>

      <div class="progress-wrap">
        <div class="progress-label">
          <span>Participation Progress</span>
          <span id="progressPct">0%</span>
        </div>
        <div class="progress-track">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>

      <div class="table-wrap">
        <table class="summary-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Santa ğŸ…</th>
              <th>Gift #</th>
              <th>Recipient ğŸ</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="adminSummaryBody"></tbody>
        </table>
      </div>

      <div class="unassigned-section">
        <h3 class="section-title">â³ Pending Participation â€” <span id="unassignedCount">0</span> people</h3>
        <div id="unassignedList" class="unassigned-grid"></div>
      </div>

    </div>
  </section>

</main>
<script src="app.js"></script>
</body>
</html>